# Project Title
Compare generation of a Python client for a flask project.
## Description
Creating the client fully-manual, semi manual using code generation systems like
flask-smorest.
## Getting Started
### Dependencies
* python 3.10
### Installing
Software can be cloned from https://github.com/asburr/exemplar_flask.
### Executing program
Start server
```
cd projects/exempler_flask
poetry lock
poetry sync --with dev,inhouse_wsdev,inhouse_wsprod
poetry run flask --app exemplar_flask.flaskapp init-db
/home/andrew/miniconda3/bin/poetry run flask --app exemplar_flask.flaskapp run
```
Using the manually generated client
```
cd projects/exempler_flask
# lock and sync if not already done above.
poetry lock
poetry sync --with dev,inhouse_wsdev,inhouse_wsprod
./flaskclient.sh test post value1 value1.2
./flaskclient.sh test get value1
./flaskclient.sh test2 post value1 value2 value2.1
./flaskclient.sh test2 get value1 value2
```
## Multiple manual clients
The fern client,
```
poetry add --group main httpx
poetry add --group main pydantic
./fernclient.sh test post value1 value1.2
./fernclient.sh test get value1
./fernclient.sh test2 post value1 value2 value2.1
./fernclient.sh test2 get value1 value2

```
The openapi-python-client,
```
poetry add --group main attrs
./opcclient.sh test post value1 value1.2
./opcclient.sh test get value1
./opcclient.sh test2 post value1 value2 value2.1
./opcclient.sh test2 get value1 value2
```
The openapi-client,
```
./opclient.sh test post value1 value1.2
./opclient.sh test get value1
./opclient.sh test2 post value1 value2 value2.1
./opclient.sh test2 get value1 value2
```
## openapi schema
The openapi schema is generated by marshmallow and flask_smorest. The code is
triggered by these two packages being installed which they are, see
src/exemplar_flask/flaskapp/testdb.py. There are two decorators. smorest_response
adds the response decorator. smorest_arguments create a schema class and
adds this class to the arguments decorator.

Use the above procedures to start the server, then using curl to dump the
openapi schema into a file called openapi.json
```
# Start the server...see above.
curl http://127.0.0.1:5000/openapi.json > openapi.json
```

You can browse to the swagger api as http://127.0.0.1:5000/swagger-ui.
## openapi client
Using openapitools/openapi-generator-cli to generate a Python client.
```
cd projects/exempler_flask
./openapigen.sh
```
client is output to openapi_client/.
## openapipython client
Using openapi-python-client to generate a Python client.
```
cd projects/exempler_flask
./openapipythongen.sh
touch openapi_python_client/__init__.py
```
client is output to openapi_python_client/.
```
poetry add --group main attrs
poetry run python
from openapi_python_client.test_api_client import Client

```
## fern client
Generate the fern Python client.
client is output to fernclient/.
```
cd projects/exempler_flask
./fern_gen.sh
```
## Version History
* 0.1
  * Initial release
## License
This project is licensed under the [NAME HERE] License - see the LICENSE.md file for details
      